<!-- src/main/resources/templates/sentiment/form.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>감성 분석 입력</title>
</head>
<body>
<h2>문의 입력</h2>
<form th:action="@{/sentiment/analyze}" method="post" onsubmit="return validateForm()">
    <textarea name="review" rows="5" cols="50" placeholder="문의를 입력하세요"></textarea><br />
    <button type="submit">감성 분석</button>
</form>

<h3>최근 문의 5개</h3>
<ul>
    <li th:if="${#lists.isEmpty(recent_reviews)}">최근 문의가 없습니다.</li>
    <li th:each="r : ${recent_reviews}">
        <span th:text="${r['review_text']}">리뷰내용</span>
        (점수: <span th:text="${r['sentiment_label']}">0</span>)
    </li>
</ul>

<script>
    function validateForm() {
        const review = document.querySelector("textarea[name='review']").value.trim();
        if (!review) {
            alert("문의를 입력해주세요.");
            return false;
        }
        return true;
    }
</script>
</body>
</html>
